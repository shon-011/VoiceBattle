<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="js/jquery-2.1.3.min.js"></script>
    <title>声でじゃんけん</title>
</head>
<body>

    <p>僕と声を使ってじゃんけんしよう。</p>
    <p>ボタンを押して出す手を「じゃんけん　パー!」のように声をだそう！</p>
    <button id="btn">最初はグー！！！！！</button>

    <div id="come"></div>
    
    <div>コンピュータの出した手は？「<span id="pc_hands">なに？</span>」</div>
    <div id="judgment"></div>

    <script>
// domの宣言
var pc_hands = document.querySelector("#pc_hands");
   var judgment = document.querySelector("#judgment");





        // 音声認識
var btn = document.querySelector("#btn");
var content = document.querySelector("#content");

// Web Speech API
var speech = new webkitSpeechRecognition();

// 日本語認識
speech.lang = "ja";


// クリックイベ
// #btnをクリックすると関数function{}が発動する。
btn.addEventListener("click",function(){    
// 発動する内容
speech.start();

});

//処理結果
speech.addEventListener("result",function(e){
// すピーチを発動した結果を得る処理
console.log(e);
speech.stop();
// 発生された音声をtxteに取り出す
let hand = e.results[0][0].transcript;



// グーの処理
if(hand =="じゃんけん グー" ){
    let gu =1
   console.log(gu)
    var pcHand = Math.floor(Math.random()*3+1);
    if(gu==2){
        var pcView="チョキ"
        var jView="勝ち"
    }
    if(gu==3){
        var pcView="パー"
        var jView="負け"
    }
    if(gu==1){
        var pcView="グー"
        var jView="引き分け"
    }
    pc_hands.innerHTML = pcView;
    judgment.innerHTML = jView;

    const come = document.querySelector("#come");
    come.innerHTML ="認識完了！いいね！"
}

// チョキの処理
else if(hand == "じゃんけん チョキ"){
    let cho =2
   console.log(cho)
    var pcHand = Math.floor(Math.random()*3+1);
    if(cho==1){
        var pcView="パー"
        var jView="勝ち"
    }
    if(cho==1){
        var pcView="グー"
        var jView="負け"
    }
    if(cho==2){
        var pcView="チョキ"
        var jView="引き分け"
    }
    pc_hands.innerHTML = pcView;
    judgment.innerHTML = jView;

    const come = document.querySelector("#come");
    come.innerHTML ="認識完了！いいね！"
}

// パーの処理
else if(hand == "じゃんけんパー"){
    let par =3
   console.log(par)
    var pcHand = Math.floor(Math.random()*3+1);
    if(par==1){
        var pcView="グー"
        var jView="勝ち"
    }
    if(par==2){
        var pcView="チョキ"
        var jView="負け"
    }
    if(par==3){
        var pcView="パー"
        var jView="引き分け"
    }
    pc_hands.innerHTML = pcView;
    judgment.innerHTML = jView;

    const come = document.querySelector("#come");
    come.innerHTML ="認識完了！いいね！"
}
// ポイの処理
else if(hand == "じゃんけんぽい"){
    let non ="notpoi"
   console.log(non)
 
    const come = document.querySelector("#come");
    come.innerHTML ="ポイじゃないよ。さあ、もう一回！"
}
// 認識不可の処理
else{
    let non ="error"
   console.log(non)
    

    const come = document.querySelector("#come");
    come.innerHTML ="君は活舌が悪いね。もう一回ボタンを押して言ってみな。"
}


});


 // const come = document.querySelector("#come");
    // come.innerHTML ="君は活舌が悪いね。もう一回ボタンを押して言ってみな。"














    </script>
</body>
</html>